#### Vue 响应式系统实现原理

**vue2的响应式原理**

![vue2的响应式原理](.\2.设计模式的道与术.assets\3.jpg)

vue2响应式系统：

+ observer（监听器）：在设计模式里，这是一恶搞订阅者，但是vue中不仅是数据监听器，还对监听到的数据进行转发，同事还是一个发布者。

+ watcher（订阅者）：observer 把数据转发给了真正的订阅者 - watcher对象。watcher 接收到新的数据后，会去更新视图。

+ compile（编译器）：MVVM 框架特有的角色，负责对每个节点元素指令进行扫描和解析，指令的数据初始化、订阅者的创建......

![vue2的响应式原理](.\2.设计模式的道与术.assets\4.jpg)

#### 实现一个Event Bus/Event Emitter

都对应一个角色--全局事件总线。

特点：所有事件的发布/订阅操作，必须经过事件中心

```https
推荐阅读源码
https://github.com/facebookarchive/emitter
```

观察者模式 和 发布-订阅模式，有些书说是一样，因为思想上差不多，但是非要纠结细节：观察者模式发布者可以直接接触到订阅者，不需要通过第三方，发布-订阅模式需要一个第三方，类似事件中心，你上传事件中心，从事件中心取。而观察者模式发布者直接通知订阅的人。

